(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d54c514"],{"02f4":function(t,e,i){var s=i("4588"),n=i("be13");t.exports=function(t){return function(e,i){var a,o,r=String(n(e)),c=s(i),l=r.length;return c<0||c>=l?t?"":void 0:(a=r.charCodeAt(c),a<55296||a>56319||c+1===l||(o=r.charCodeAt(c+1))<56320||o>57343?t?r.charAt(c):a:t?r.slice(c,c+2):o-56320+(a-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var s=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?s(t,e).length:1)}},"0bfb":function(t,e,i){"use strict";var s=i("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,i){"use strict";i("b0c5");var s=i("2aba"),n=i("32e9"),a=i("79e5"),o=i("be13"),r=i("2b4c"),c=i("520a"),l=r("species"),u=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=r(t),d=!a((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),v=d?!a((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[l]=function(){return i}),i[f](""),!e})):void 0;if(!d||!v||"replace"===t&&!u||"split"===t&&!p){var h=/./[f],m=i(o,f,""[t],(function(t,e,i,s,n){return e.exec===c?d&&!n?{done:!0,value:h.call(e,i,s)}:{done:!0,value:t.call(i,e,s)}:{done:!1}})),g=m[0],b=m[1];s(String.prototype,t,g),n(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"2fe6":function(t,e,i){"use strict";var s=i("d918"),n=i.n(s);n.a},"479d":function(t,e,i){"use strict";var s=i("e1d4"),n=i.n(s);n.a},"520a":function(t,e,i){"use strict";var s=i("0bfb"),n=RegExp.prototype.exec,a=String.prototype.replace,o=n,r="lastIndex",c=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t[r]||0!==e[r]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(o=function(t){var e,i,o,u,p=this;return l&&(i=new RegExp("^"+p.source+"$(?!\\s)",s.call(p))),c&&(e=p[r]),o=n.call(p,t),c&&o&&(p[r]=p.global?o.index+o[0].length:e),l&&o&&o.length>1&&a.call(o[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),t.exports=o},"5cf0":function(t,e,i){},"5f1b":function(t,e,i){"use strict";var s=i("23c6"),n=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var a=i.call(t,e);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==s(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"86e4":function(t,e,i){},9837:function(t,e,i){"use strict";var s=i("86e4"),n=i.n(s);n.a},"99d2":function(t,e,i){"use strict";var s=i("c1ef"),n=i.n(s);n.a},a481:function(t,e,i){"use strict";var s=i("cb7c"),n=i("4bf8"),a=i("9def"),o=i("4588"),r=i("0390"),c=i("5f1b"),l=Math.max,u=Math.min,p=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};i("214f")("replace",2,(function(t,e,i,h){return[function(s,n){var a=t(this),o=void 0==s?void 0:s[e];return void 0!==o?o.call(s,a,n):i.call(String(a),s,n)},function(t,e){var n=h(i,t,this,e);if(n.done)return n.value;var p=s(t),f=String(this),d="function"===typeof e;d||(e=String(e));var g=p.global;if(g){var b=p.unicode;p.lastIndex=0}var k=[];while(1){var w=c(p,f);if(null===w)break;if(k.push(w),!g)break;var x=String(w[0]);""===x&&(p.lastIndex=r(f,a(p.lastIndex),b))}for(var C="",S=0,y=0;y<k.length;y++){w=k[y];for(var _=String(w[0]),F=l(u(o(w.index),f.length),0),E=[],V=1;V<w.length;V++)E.push(v(w[V]));var z=w.groups;if(d){var T=[_].concat(E,F,f);void 0!==z&&T.push(z);var $=String(e.apply(void 0,T))}else $=m(_,f,F,E,z,e);F>=S&&(C+=f.slice(S,F)+$,S=F+_.length)}return C+f.slice(S)}];function m(t,e,s,a,o,r){var c=s+t.length,l=a.length,u=d;return void 0!==o&&(o=n(o),u=f),i.call(r,u,(function(i,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(c);case"<":r=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return i;if(u>l){var f=p(u/10);return 0===f?i:f<=l?void 0===a[f-1]?n.charAt(1):a[f-1]+n.charAt(1):i}r=a[u-1]}return void 0===r?"":r}))}}))},adf2:function(t,e,i){},b0c5:function(t,e,i){"use strict";var s=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},bd17:function(t,e,i){"use strict";var s=i("5cf0"),n=i.n(s);n.a},c1ef:function(t,e,i){},c3ce:function(t,e,i){"use strict";var s=i("adf2"),n=i.n(s);n.a},d7f7:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook"},[i("EbookReader"),i("EbookTitle"),i("EbookMenu")],1)},n=[],a=i("5158"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-down"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[i("div",{staticClass:"left",on:{click:t.back}},[i("span",{staticClass:"icon-back"})]),i("div",{staticClass:"right"},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-shelf"})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-cart"})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-more"})])])])])},r=[],c=i("ac0d"),l={mixins:[c["a"]],methods:{back:function(){console.log("back")}}},u=l,p=(i("c3ce"),i("2877")),f=Object(p["a"])(u,o,r,!1,null,"48ba8b1d",null),d=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-menu",on:{click:function(e){return t.showSetting(3)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-progress",on:{click:function(e){return t.showSetting(2)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-bright",on:{click:function(e){return t.showSetting(1)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])])]),i("ebook-setting-font"),i("ebook-setting-font-popup"),i("ebook-setting-theme"),i("ebook-setting-progress")],1)},h=[],m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-font-size"},[i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),i("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,s){return i("div",{key:s,staticClass:"select-wrapper",on:{click:function(i){return t.setFontSize(e.fontSize)}}},[i("div",{staticClass:"line"}),i("div",{staticClass:"point-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[i("div",{staticClass:"small-point"})])]),i("div",{staticClass:"line"})])})),0),i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])]),i("div",{staticClass:"setting-font-family",on:{click:t.showFontFamilyPopup}},[i("div",{staticClass:"setting-font-family-text-wrapper"},[i("span",{staticClass:"setting-font-family-text"},[t._v(" "+t._s(this.defaultFontFamily)+" ")])]),i("div",{staticClass:"setting-font-family-icon-wrapper"},[i("span",{staticClass:"icon-forward"})])])])])},g=[],b=i("5de6"),k=i("e8ec"),w={mixins:[c["a"]],data:function(){return{fontSizeList:b["b"]}},methods:{setFontSize:function(t){this.setDefaultFontSize(t),Object(k["h"])(this.fileName,t),this.currentBook.rendition.themes.fontSize(t)},showFontFamilyPopup:function(){this.setFontFamilyVisible(!0)}}},x=w,C=(i("479d"),Object(p["a"])(x,m,g,!1,null,"ba12c7ee",null)),S=C.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"ebook-popup-list"},[i("div",{staticClass:"ebook-popup-title"},[i("div",{staticClass:"ebook-popup-title-icon",on:{click:t.hide}},[i("span",{staticClass:"icon-down2"})]),i("span",{staticClass:"ebook-popup-title-text"},[t._v(t._s(t.$t("book.selectFont")))])]),i("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamilyList,(function(e,s){return i("div",{key:s,staticClass:"ebook-popup-item",on:{click:function(i){return t.setFontFamily(e.font)}}},[i("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)}},[t._v("\n          "+t._s(e.font)+"\n        ")]),t.isSelected(e)?i("div",{staticClass:"ebook-popup-item-check"},[i("span",{staticClass:"icon-check"})]):t._e()])})),0)])])},_=[],F={mixins:[c["a"]],data:function(){return{fontFamilyList:b["a"]}},methods:{hide:function(){this.setFontFamilyVisible(!1)},isSelected:function(t){return this.defaultFontFamily===t.font},setFontFamily:function(t){this.setDefaultFontFamily(t),Object(k["g"])(this.fileName,t),"Default"===t?this.currentBook.rendition.themes.font("Times New Roman"):this.currentBook.rendition.themes.font(t)}}},E=F,V=(i("2fe6"),Object(p["a"])(E,y,_,!1,null,"789e409e",null)),z=V.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,s){return i("div",{key:s,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(s)}}},[i("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),i("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(" "+t._s(e.alias)+" ")])])})),0)])])},$=[],P=(i("7f7f"),{mixins:[c["a"]],methods:{setTheme:function(t){var e=this,i=this.themeList[t];this.setDefaultTheme(i.name).then((function(){e.currentBook.rendition.themes.select(i.name),e.initGlobalStyle()})),Object(k["l"])(this.fileName,i.name)}}}),R=P,N=(i("bd17"),Object(p["a"])(R,T,$,!1,null,"647c754f",null)),j=N.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-progress"},[i("div",{staticClass:"read-time-wrapper"},[i("span",{staticClass:"read-time-text"},[t._v(" "+t._s(t.getReadTimeTest())+" ")]),i("span",{staticClass:"icon-forward"})]),i("div",{staticClass:"progress-wrapper"},[i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[i("span",{staticClass:"icon-back"})]),i("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[i("span",{staticClass:"icon-forward"})])]),i("div",{staticClass:"text-wrapper"},[i("span",{staticClass:"process-section-text"},[t._v(t._s(t.getSectionName))]),i("span",[t._v(" ("+t._s(t.bookAvailable?t.progress+"%":"加载中...")+") ")])])])])])},O=[],A=(i("a481"),{mixins:[c["a"]],computed:{getSectionName:function(){if(this.section){var t=this.currentBook.section(this.section);if(t&&t.href)return this.currentBook.navigation.get(t.href).label}}},methods:{onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress(),e.updateProgressBg()}))},onProgressInput:function(t){this.setProgress(t),this.updateProgressBg()},displayProgress:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},updateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then((function(){t.displaySection()}))},nextSection:function(){var t=this;this.section<this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then((function(){t.displaySection()}))},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)},getReadTimeTest:function(){return this.$t("book.haveRead").replace("$1",this.getReadTimeByMinute(this.fileName))},getReadTimeByMinute:function(){var t=Object(k["e"])(this.fileName);return t?Math.ceil(t/60):0}},updated:function(){this.updateProgressBg()}}),L=A,I=(i("9837"),Object(p["a"])(L,B,O,!1,null,"15e1376b",null)),M=I.exports,D={mixins:[c["a"]],components:{EbookSettingFont:S,EbookSettingFontPopup:z,EbookSettingProgress:M,EbookSettingTheme:j},methods:{showSetting:function(t){this.setSettingVisible(t)}}},J=D,G=(i("99d2"),Object(p["a"])(J,v,h,!1,null,"4d8160a2",null)),q=G.exports,H={mixins:[c["a"]],components:{EbookReader:a["default"],EbookTitle:d,EbookMenu:q},methods:{startLoopReadTime:function(){var t=this,e=Object(k["e"])(this.fileName);e||(e=0),this.task=setInterval((function(){e++,e%30===0&&Object(k["k"])(t.fileName,e)}),1e3)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},K=H,Q=Object(p["a"])(K,s,n,!1,null,"b88e378c",null);e["default"]=Q.exports},d918:function(t,e,i){},e1d4:function(t,e,i){}}]);
//# sourceMappingURL=chunk-7d54c514.bd86ccd4.js.map